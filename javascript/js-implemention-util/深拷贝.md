# JavaScript实现深拷贝函数

### 1.最基础版的克隆

当遇到一个无限层级的对象拷贝时，我们的第一反应应该就是`递归`

下面，我们仅考虑`对象`和`基本类型`来做一个深拷贝：

```js
function getType(val) {
  return Object.prototype.toString.call(val);
}

function deepClone(obj) {
  if (getType(obj) === 'object Object') {
    const newObj = {};
    for (const key in obj) {
      newObj[key] = deepClone(obj[key]);
    }
    return newObj;
  } else {
    return obj;
  }
}
```

### 2.兼容数组
在确定了深拷贝的基本逻辑后，接下来，我们对数组进行兼容
```js
function getType(val) {
  return Object.prototype.toString.call(val);
}

function deepClone(obj) {
  if (getType(obj) === 'object Object') {
    const newObj = Array.isArray(obj) ? [] : {}; // 这里对类型进行判断，返回空数组或空对象
    for (const key in obj) {
      newObj[key] = deepClone(obj[key]);
    }
    return newObj;
  } else {
    return obj;
  }
}

// 测试demo
const obj = {
  name: 'kerwin',
  info: {
    age: 27,
    detail: {
      department: '技术部',
    },
  },
  list: [{ age: 12 }, 2, 3],
};

deepClone(obj);
```