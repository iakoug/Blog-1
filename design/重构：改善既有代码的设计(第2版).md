# 重构：改善既有代码的设计(第 2 版)

本文主要记录阅读完《重构：改善既有代码的设计(第 2 版)》的一些收获和总结。

## 重构的原则

### 重构的定义

对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性、健壮性等。

“软件可观察行为”可以简单理解为用户体验系统的直观感受。

如果你把一个模块“重构”后，页面布局或业务操作逻辑发生了改变，也许你应该说对这个模块进行了**重写**或**优化**，**重构**可能不太准确。

### 为何重构

- 改进软件的设计：消除重复代码，让代码更加精简。

- 让代码更容易理解

- 帮助快速找到 bug

- 提高编程速度

### 何时重构

重构的最佳时机是在添加新功能之前。但在平时的开发中，我们经常会遇到紧急的任务，如果这时候你发现代码需要重构。添加一个`TODO`标记，等任务开发完成后再来做这件事。除此之外，也可以定期组织重构，让新功能（新业务）更容易被添加。

如果你遇到一块凌乱的代码，但你保证这块代码永远不会被修改时，或者你发现重写比重构更容易时，不要浪费时间去重构。

### 重构的挑战

首先，需要重构的代码，一般会比较晦涩难懂。大多数时候，这段代码很可能是前人留下的宝(shi)藏(shan)，需要花时间去理清其逻辑，这比较考验自身的技术功底。

其次，如果涉及到修改的函数或接口名，是第三方用户或跨部门同事调用时，这会涉及到如何有效的沟通。

最后，我们还需要和交付经理沟通项目进度的问题。“重构是否延缓新功能开发？”短期来看，确实会因为重构耽搁新功能开发时间。但是从长远来看，重构后能让我们更快的添加新功能、修复 bug。所以，当你和交付经理讨论是否有必要重构时，应该反复强调后者。而不是单纯从技术角度去说明重构后的代码是如何的好看、清晰。应该**从经济利益**触发，说明重构后，能节省开发新功能、修复 bug 的时间。
