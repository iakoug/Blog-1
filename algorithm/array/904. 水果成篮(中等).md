### 904. 水果成篮(中等)
>leetcode 地址：https://leetcode-cn.com/problems/fruit-into-baskets/

### 题解
题目中求`可以收集水果的最大数目，则要求每采摘一次，你将会向右移动到下一棵树，并继续采摘`。实际就是求`最大的子序列`问题。

```js
/**
 * @param {number[]} fruits
 * @return {number}
 */
var totalFruit = function(fruits) {
   // 滑动窗口求解
  let left = 0; // 左指针
  let right = 0; // 右指针
  const MAX_LENGTH = 2; // 已采摘的水果种类，最多2种
  let max = 0; // 已采摘的水果种类最大值
  const map = new Map(); // 用于存储水果种类的，key为水果种类，value为该水果出现次数

  while (right < fruits.length) {
    if (!map.has(fruits[right])) { // 判断篮子中是否有该水果
      map.set(fruits[right], 1); // 如果没有该水果，则添加到篮子中，并设置值为1。表示出现1次
    } else {
      map.set(fruits[right], map.get(fruits[right]) + 1); // 如果篮子中已经有该水果了，设置值value+1
    }
    right++; // 移动右指针

    while (map.size > MAX_LENGTH) { // 判断篮子中的水果种类是否大于2
      if (map.get(fruits[left])) { // 如果左指针位置的水果已存在，则设置值value-1
        map.set(fruits[left], map.get(fruits[left]) - 1);
      }
      if (map.get(fruits[left]) <= 0) { // 如果左指针位置的水果种类为0，则删除该分类
        map.delete(fruits[left]);
      }
      left++; // 右移左指针
    }
    if (right - left > max) { // 记录最大值
      max = right - left;
    }
  }
  return max;
};
```